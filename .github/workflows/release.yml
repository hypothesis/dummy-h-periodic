name: Release

on:
  push:

jobs:
  build-and-release:
    name: Build and Release
    runs-on: ubuntu-latest
    steps:
    - name: Dummy build
      run: echo "Build"
    - name: Dummy release
      run: echo "release"

  deploy-qa:
    name: Deploy QA
    needs: build-and-release
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master'
    steps:
    - name: Dummy step
      run: echo "Master branch: Deploy QA"

  approval:
    name: Approval
    needs: deploy-qa
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master'
    steps:
    - name: Dummy step
      run: echo "Mater branch: Approval"

  deploy-prod:
    name: Deploy Production
    needs: approval
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master'
    steps:
    - name: Dummy step
      run: echo "Master branch: Deploy prod"
